import React from 'react';
import { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import { ScrollArea } from '@/components/ui/scroll-area';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Badge } from '@/components/ui/badge';
import { 
  BookOpen, 
  Settings, 
  MessageSquare, 
  Award, 
  TrendingUp,
  Zap,
  Database
} from 'lucide-react';

interface DocumentationModalProps {
  open: boolean;
  onClose: () => void;
}

const DocumentationModal: React.FC<DocumentationModalProps> = ({ open, onClose }) => {
  return (
    <Dialog open={open} onOpenChange={onClose}>
      <DialogContent className="max-w-4xl max-h-[90vh] overflow-hidden flex flex-col">
        <DialogHeader>
          <DialogTitle className="flex items-center gap-2">
            <BookOpen className="h-5 w-5" />
            GenAI Evals Documentation
          </DialogTitle>
        </DialogHeader>

        <Tabs defaultValue="getting-started" className="flex-1 overflow-hidden flex flex-col">
          <TabsList className="grid w-full grid-cols-4">
            <TabsTrigger value="getting-started">Getting Started</TabsTrigger>
            <TabsTrigger value="workflow">Workflow</TabsTrigger>
            <TabsTrigger value="features">Features</TabsTrigger>
            <TabsTrigger value="tips">Tips & Tricks</TabsTrigger>
          </TabsList>

          {/* Getting Started Tab */}
          <TabsContent value="getting-started" className="flex-1 overflow-auto">
            <ScrollArea className="h-[500px]">
              <div className="space-y-4 pr-4">
                <Card>
                  <CardHeader>
                    <CardTitle className="text-lg">Welcome to GenAI Evals</CardTitle>
                  </CardHeader>
                  <CardContent className="space-y-3">
                    <p className="text-sm">
                      GenAI Evals is a comprehensive platform for testing and evaluating your GenAI systems. 
                      Whether you're building chatbots, virtual assistants, or AI agents, this platform helps 
                      you ensure quality and performance.
                    </p>
                    <div className="bg-blue-50 border border-blue-200 rounded-lg p-3">
                      <p className="text-sm text-blue-900 font-medium mb-2">Quick Start:</p>
                      <ol className="text-sm text-blue-900 space-y-1 list-decimal list-inside">
                        <li>Click "Start New Test" to begin an evaluation</li>
                        <li>Configure your agent and test settings</li>
                        <li>Generate or upload test cases</li>
                        <li>Run conversation simulations</li>
                        <li>Review and score the results</li>
                      </ol>
                    </div>
                  </CardContent>
                </Card>

                <Card>
                  <CardHeader>
                    <CardTitle className="text-sm flex items-center gap-2">
                      <Zap className="h-4 w-4" />
                      Key Concepts
                    </CardTitle>
                  </CardHeader>
                  <CardContent className="space-y-3">
                    <div>
                      <p className="font-medium text-sm">Evaluation Sessions</p>
                      <p className="text-xs text-muted-foreground">
                        Each test is an evaluation session containing test cases, conversations, and scores.
                      </p>
                    </div>
                    <div>
                      <p className="font-medium text-sm">Test Cases</p>
                      <p className="text-xs text-muted-foreground">
                        Scenarios to test your AI agent. Can be generated by AI or uploaded via CSV.
                      </p>
                    </div>
                    <div>
                      <p className="font-medium text-sm">Scoring Metrics</p>
                      <p className="text-xs text-muted-foreground">
                        Criteria for evaluating agent responses (accuracy, helpfulness, relevance, etc.).
                      </p>
                    </div>
                    <div>
                      <p className="font-medium text-sm">Conversations</p>
                      <p className="text-xs text-muted-foreground">
                        Simulated multi-turn dialogues between test users and your AI agent.
                      </p>
                    </div>
                  </CardContent>
                </Card>
              </div>
            </ScrollArea>
          </TabsContent>

          {/* Workflow Tab */}
          <TabsContent value="workflow" className="flex-1 overflow-auto">
            <ScrollArea className="h-[500px]">
              <div className="space-y-4 pr-4">
                <Card>
                  <CardHeader>
                    <CardTitle className="text-sm flex items-center gap-2">
                      <Settings className="h-4 w-4" />
                      Step 1: Configure
                    </CardTitle>
                  </CardHeader>
                  <CardContent className="space-y-2">
                    <p className="text-sm">Set up your evaluation session:</p>
                    <ul className="text-xs space-y-1 list-disc list-inside text-muted-foreground">
                      <li>Provide a session name for easy identification</li>
                      <li>Describe your AI agent and its purpose</li>
                      <li>Configure the remote agent endpoint URL</li>
                      <li>Set conversation parameters (turns, mode)</li>
                      <li>Generate or define scoring metrics</li>
                    </ul>
                  </CardContent>
                </Card>

                <Card>
                  <CardHeader>
                    <CardTitle className="text-sm flex items-center gap-2">
                      <MessageSquare className="h-4 w-4" />
                      Step 2: Generate Test Cases
                    </CardTitle>
                  </CardHeader>
                  <CardContent className="space-y-2">
                    <p className="text-sm">Create test scenarios:</p>
                    <ul className="text-xs space-y-1 list-disc list-inside text-muted-foreground">
                      <li>Let AI generate test cases based on your agent description</li>
                      <li>Upload your own test cases via CSV file</li>
                      <li>Manually add custom test cases</li>
                      <li>Review and edit generated test cases</li>
                    </ul>
                  </CardContent>
                </Card>

                <Card>
                  <CardHeader>
                    <CardTitle className="text-sm flex items-center gap-2">
                      <MessageSquare className="h-4 w-4" />
                      Step 3: Simulate Conversations
                    </CardTitle>
                  </CardHeader>
                  <CardContent className="space-y-2">
                    <p className="text-sm">Run realistic dialogues:</p>
                    <ul className="text-xs space-y-1 list-disc list-inside text-muted-foreground">
                      <li>System automatically simulates user-agent conversations</li>
                      <li>Each test case generates a multi-turn dialogue</li>
                      <li>View conversations in real-time</li>
                      <li>Review conversation quality before scoring</li>
                    </ul>
                  </CardContent>
                </Card>

                <Card>
                  <CardHeader>
                    <CardTitle className="text-sm flex items-center gap-2">
                      <Award className="h-4 w-4" />
                      Step 4: Score & Analyze
                    </CardTitle>
                  </CardHeader>
                  <CardContent className="space-y-2">
                    <p className="text-sm">Evaluate performance:</p>
                    <ul className="text-xs space-y-1 list-disc list-inside text-muted-foreground">
                      <li>AI automatically scores each conversation</li>
                      <li>Scores based on your defined metrics</li>
                      <li>View detailed feedback for each metric</li>
                      <li>See overall session performance</li>
                      <li>Export results for further analysis</li>
                    </ul>
                  </CardContent>
                </Card>
              </div>
            </ScrollArea>
          </TabsContent>

          {/* Features Tab */}
          <TabsContent value="features" className="flex-1 overflow-auto">
            <ScrollArea className="h-[500px]">
              <div className="space-y-4 pr-4">
                <Card>
                  <CardHeader>
                    <CardTitle className="text-sm flex items-center gap-2">
                      <TrendingUp className="h-4 w-4" />
                      Dashboard Analytics
                    </CardTitle>
                  </CardHeader>
                  <CardContent className="space-y-2">
                    <p className="text-sm">Track your evaluation history:</p>
                    <ul className="text-xs space-y-1 list-disc list-inside text-muted-foreground">
                      <li>View all previous evaluation sessions</li>
                      <li>See aggregate statistics (total sessions, avg scores)</li>
                      <li>Track performance trends over time</li>
                      <li>Click the eye icon to view detailed session information</li>
                      <li>Click the arrow icon to load and continue a session</li>
                    </ul>
                  </CardContent>
                </Card>

                <Card>
                  <CardHeader>
                    <CardTitle className="text-sm flex items-center gap-2">
                      <Database className="h-4 w-4" />
                      Session Details Modal
                    </CardTitle>
                  </CardHeader>
                  <CardContent className="space-y-2">
                    <p className="text-sm">Comprehensive session information:</p>
                    <ul className="text-xs space-y-1 list-disc list-inside text-muted-foreground">
                      <li><strong>Overview:</strong> Stats, configuration, and metrics summary</li>
                      <li><strong>Test Cases:</strong> All test cases used in the session</li>
                      <li><strong>Conversations:</strong> Complete dialogue history</li>
                      <li><strong>Scores:</strong> Detailed scoring breakdown per conversation</li>
                    </ul>
                  </CardContent>
                </Card>

                <Card>
                  <CardHeader>
                    <CardTitle className="text-sm">Advanced Features</CardTitle>
                  </CardHeader>
                  <CardContent className="space-y-2">
                    <div className="space-y-2">
                      <div className="flex items-start gap-2">
                        <Badge variant="outline" className="text-xs mt-0.5">NEW</Badge>
                        <div>
                          <p className="font-medium text-sm">Remote Agent Testing</p>
                          <p className="text-xs text-muted-foreground">
                            Test any HTTP endpoint that follows the chat completion format
                          </p>
                        </div>
                      </div>
                      <div className="flex items-start gap-2">
                        <Badge variant="outline" className="text-xs mt-0.5">NEW</Badge>
                        <div>
                          <p className="font-medium text-sm">Flexible Conversation Modes</p>
                          <p className="text-xs text-muted-foreground">
                            Fixed turns, variable ranges, or auto-detection based on context
                          </p>
                        </div>
                      </div>
                      <div className="flex items-start gap-2">
                        <Badge variant="outline" className="text-xs mt-0.5">NEW</Badge>
                        <div>
                          <p className="font-medium text-sm">MongoDB Persistence</p>
                          <p className="text-xs text-muted-foreground">
                            All evaluation data is automatically saved to MongoDB
                          </p>
                        </div>
                      </div>
                    </div>
                  </CardContent>
                </Card>
              </div>
            </ScrollArea>
          </TabsContent>

          {/* Tips & Tricks Tab */}
          <TabsContent value="tips" className="flex-1 overflow-auto">
            <ScrollArea className="h-[500px]">
              <div className="space-y-4 pr-4">
                <Card>
                  <CardHeader>
                    <CardTitle className="text-sm">üí° Best Practices</CardTitle>
                  </CardHeader>
                  <CardContent className="space-y-3">
                    <div>
                      <p className="font-medium text-sm">Start with a Clear Agent Description</p>
                      <p className="text-xs text-muted-foreground">
                        A detailed description helps generate better test cases and scoring metrics.
                        Include the agent's purpose, capabilities, and target users.
                      </p>
                    </div>
                    <div>
                      <p className="font-medium text-sm">Use Descriptive Session Names</p>
                      <p className="text-xs text-muted-foreground">
                        Name sessions clearly (e.g., "Customer Support Bot - v2.1") to easily identify them later.
                      </p>
                    </div>
                    <div>
                      <p className="font-medium text-sm">Review Generated Test Cases</p>
                      <p className="text-xs text-muted-foreground">
                        AI-generated test cases are a starting point. Review and edit them to match your specific needs.
                      </p>
                    </div>
                    <div>
                      <p className="font-medium text-sm">Define Custom Metrics</p>
                      <p className="text-xs text-muted-foreground">
                        Create metrics specific to your use case beyond generic ones like "accuracy" and "relevance".
                      </p>
                    </div>
                  </CardContent>
                </Card>

                <Card>
                  <CardHeader>
                    <CardTitle className="text-sm">‚ö†Ô∏è Common Pitfalls</CardTitle>
                  </CardHeader>
                  <CardContent className="space-y-3">
                    <div>
                      <p className="font-medium text-sm">Too Few Test Cases</p>
                      <p className="text-xs text-muted-foreground">
                        Use at least 10-15 test cases for meaningful evaluation results.
                      </p>
                    </div>
                    <div>
                      <p className="font-medium text-sm">Vague Scoring Metrics</p>
                      <p className="text-xs text-muted-foreground">
                        Define clear, specific criteria for each metric. Vague metrics lead to inconsistent scoring.
                      </p>
                    </div>
                    <div>
                      <p className="font-medium text-sm">Not Testing Edge Cases</p>
                      <p className="text-xs text-muted-foreground">
                        Include test cases for error handling, ambiguous queries, and out-of-scope requests.
                      </p>
                    </div>
                  </CardContent>
                </Card>

                <Card>
                  <CardHeader>
                    <CardTitle className="text-sm">üöÄ Pro Tips</CardTitle>
                  </CardHeader>
                  <CardContent className="space-y-3">
                    <div>
                      <p className="font-medium text-sm">Compare Sessions Over Time</p>
                      <p className="text-xs text-muted-foreground">
                        Use the Dashboard to track how your agent improves across different versions.
                      </p>
                    </div>
                    <div>
                      <p className="font-medium text-sm">Use Session Details for Debugging</p>
                      <p className="text-xs text-muted-foreground">
                        Click the eye icon on any session to see exactly what went wrong in low-scoring conversations.
                      </p>
                    </div>
                    <div>
                      <p className="font-medium text-sm">Export Results for Reporting</p>
                      <p className="text-xs text-muted-foreground">
                        Use the Results page to export detailed evaluation data for stakeholder reports.
                      </p>
                    </div>
                  </CardContent>
                </Card>
              </div>
            </ScrollArea>
          </TabsContent>
        </Tabs>
      </DialogContent>
    </Dialog>
  );
};

export default DocumentationModal;

